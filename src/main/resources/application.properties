# =============================================================================
# JOURNAL INDEX INTEGRATION - MAIN APPLICATION CONFIGURATION
# =============================================================================

# =============================================================================
# PROFILE CONFIGURATION
# =============================================================================
# Default profile (can be overridden by environment variables)
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# Application Information
spring.application.name=journal-index-integration
info.app.name=Journal Index Integration
info.app.description=Lambda service for journal data integration
info.app.version=1.0.0

# =============================================================================
# DATABASE CONFIGURATION (DEFAULT VALUES)
# =============================================================================
# Default database configuration (can be overridden by profiles)
database.insert.journal=INSERT INTO journals (url, title, issn, publisher, subject_areas, metadata, created_at, updated_at) VALUES (:#url, :#title, :#issn, :#publisher, :#subject_areas, :#metadata, NOW(), NOW())

# Default JPA Configuration
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:validate}
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=${FORMAT_SQL:true}
spring.jpa.properties.hibernate.use_sql_comments=${USE_SQL_COMMENTS:true}
spring.jpa.properties.hibernate.jdbc.batch_size=${BATCH_SIZE:20}
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Production Data Source Configuration
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/journal_index?useSSL=true&serverTimezone=UTC&requireSSL=true&verifyServerCertificate=true}
spring.datasource.username=${DB_USERNAME:prod_user}
spring.datasource.password=${DB_PASSWORD:CHANGE_ME}
spring.datasource.hikari.maximum-pool-size=${MAX_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${MIN_IDLE:5}
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000

# =============================================================================
# AWS CONFIGURATION (DEFAULT VALUES)
# =============================================================================
aws.region=${AWS_REGION:us-east-1}
aws.sqs.queue.url=${SQS_QUEUE_URL:https://sqs.ap-south-1.amazonaws.com/123456789012/journal-index-queue-prod}

# =============================================================================
# OAI CONFIGURATION (DEFAULT VALUES)
# =============================================================================
oai.default.metadata.prefix=${OAI_METADATA_PREFIX:oai_dc}
oai.batch.size=${OAI_BATCH_SIZE:100}
oai.timeout=${OAI_TIMEOUT:30000}

# =============================================================================
# LOGGING CONFIGURATION (DEFAULT VALUES)
# =============================================================================
logging.level.com.teckiz.journalindex=${LOG_LEVEL:INFO}
logging.level.org.apache.camel=${CAMEL_LOG_LEVEL:INFO}
logging.level.org.apache.camel.component.sql=${SQL_LOG_LEVEL:DEBUG}

# =============================================================================
# ERROR HANDLING (DEFAULT VALUES)
# =============================================================================
error.max.retries=${MAX_RETRIES:3}
error.retry.delay=${RETRY_DELAY:5000}

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Server Configuration
server.port=${SERVER_PORT:8080}
server.servlet.context-path=${CONTEXT_PATH:/}

# Management/Actuator Configuration
management.server.port=${MANAGEMENT_PORT:8081}
management.endpoints.web.base-path=${ACTUATOR_BASE_PATH:/actuator}

# =============================================================================
# FEATURE FLAGS (DEFAULT VALUES)
# =============================================================================
feature.enable.oai.ojs=${ENABLE_OJS_OAI:true}
feature.enable.oai.doj=${ENABLE_DOAJ:true}
feature.enable.teckiz=${ENABLE_TECKIZ:true}
feature.enable.cron.import=${ENABLE_CRON_IMPORT:true}
feature.enable.batch.processing=${ENABLE_BATCH_PROCESSING:true}
feature.enable.parallel.processing=${ENABLE_PARALLEL_PROCESSING:false}
feature.enable.caching=${ENABLE_CACHING:false}

# =============================================================================
# MONITORING CONFIGURATION (DEFAULT VALUES)
# =============================================================================
# Micrometer configuration
management.metrics.export.cloudwatch.enabled=${ENABLE_CLOUDWATCH:false}
management.metrics.export.prometheus.enabled=${ENABLE_PROMETHEUS:true}

# =============================================================================
# SECURITY CONFIGURATION (DEFAULT VALUES)
# =============================================================================
# Basic security (can be overridden by profiles)
spring.security.user.name=${ADMIN_USER:admin}
spring.security.user.password=${ADMIN_PASSWORD:CHANGE_ME}

# =============================================================================
# CACHING CONFIGURATION (DEFAULT VALUES)
# =============================================================================
spring.cache.type=${CACHE_TYPE:none}
spring.cache.cache-names=${CACHE_NAMES:oai-responses,api-cache}
